{"version":3,"sources":["data.js","utils/utils.js","core/api.js","components/SalesTable/StockTable.js","components/SalesTable/SalesTable.js","App.js","index.js"],"names":["dateFormat","girlsGoods","boysGoods","productNamesToFolders","getSize","name","match","createDefaultDataSource","sex","inisialValue","goods","map","good","idx","key","NB","columns","titles","res","title","dataIndex","render","value","record","props","style","background","parseInt","children","unshift","createColumns","folderLinks","girls","boys","unisex","fetchStock","options","a","folderName","inTransit","link","axios","post","headers","result","data","fetchSales","momentFrom","momentTo","moment","Date","format","createDefaultStock","product","sizes","width","depth","brands","StockTable","fetchFunc","useState","dataSource","setDataSource","isLoading","setIsLoading","setInTransit","brand","setBrand","useParams","menu","theme","selectedKeys","Item","onClick","updateDataSource","stockData","newDataSource","products","filterByBrand","forEach","size","item","folder","stock","find","el","useEffect","overlay","placement","onChange","prev","columnstock","pagination","bordered","loading","filter","indexOf","mapSexToSymbol","productNames","Object","keys","RangePicker","DatePicker","SalesTable","filteredBySex","filterBySex","updateSalesData","direction","align","moments","_d","str","re","checkSex","assortment","filterByProductName","productFolder","findFolderByProductName","sellQuantity","SubMenu","Menu","App","state","current","handleClick","e","setState","this","mode","to","exact","path","React","Component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.ba25c5ab.chunk.js","sourcesContent":["export const dateFormat = 'YYYY-MM-DD HH:mm:ss';\n\n\n        export const girlsGoods = [\n          \"Аксессуары\",\n          \"Боди (длинный рукав)\",\n          \"Боди (короткий рукав)\",\n          \"Кофты\",\n          \"Наборы\",\n          \"Песочник\",\n          \"Пижамы\",\n          \"Платья\",\n          \"Регланы\",\n          \"Футболки\",\n          \"Человечки\",\n          \"Шорты\",\n          \"Штаны\",\n        ];\n        export const boysGoods = [\n        \"Аксессуары\",\n        \"Боди (длинный рукав)\",\n        \"Боди (короткий рукав)\",\n        \"Кофты\",\n        \"Наборы\",\n        \"Песочник\",\n        \"Пижамы\",\n        \"Регланы\",\n        \"Футболки\",\n        \"Человечки\",\n        \"Шорты\",\n        \"Штаны\",\n        ];\n\n\nexport const productNamesToFolders = {\n    \"ДР\":\"Боди (длинный рукав)\",\n    \"КР\":\"Боди (короткий рукав)\",\n    \"Кофт\":\"Кофты\",\n    \"Набор\":\"Наборы\",\n    \"Песочник\":\"Песочник\",\n    \"Пижам\":\"Пижамы\",\n    \"Плать\":\"Платья\",\n    \"Реглан\":\"Регланы\",\n    \"Футболк\":\"Футболки\",\n    \"Человеч\":\"Человечки\",\n    \"Шорты\":\"Шорты\",\n    \"Штаны\": \"Штаны\",\n    \"Лосины\":\"Штаны\",\n    \"Костюм\":\"Наборы\"\n}\nexport const sizes = [\n\"NB\",\n\"0-3\",\n\"1-2\",\n\"2-4\",\n\"3-6\",\n\"4-6\",\n\"6-9\",\n\"9-12\",\n\"12-18\",\n\"18-24\",\n\"24-36\",\n\"24-48\",\n\"36-48\"]\n\n","import { boysGoods, girlsGoods, sizes } from \"../data\"\n\nexport function getSize(name){\n  const re = /([0-9]+)-([0-9]+)|NB/g;\n  return name.match(re)[0];\n}\n\nexport function createDefaultDataSource(sex,inisialValue=\"\"){\n  const goods = sex === 'girls' ? girlsGoods : boysGoods\n  return goods.map((good,idx)=>{\n  \n    return {\n      key: idx,\n      name:good,\n      NB: inisialValue,\n      \"0-3\": inisialValue,\n      \"1-2\":inisialValue,\n      \"2-4\":inisialValue,\n      \"3-6\": inisialValue,\n      \"4-6\": inisialValue,\n      \"6-9\": inisialValue,\n      \"9-12\": inisialValue,\n      \"12-18\": inisialValue,\n      \"18-24\": inisialValue,\n      \"24-36\":inisialValue,\n      \"24-48\":inisialValue,\n      \"36-48\":inisialValue\n    }\n  })\n}\n\nexport function createColumns(titles){\n    const res = titles.map((title,idx)=>{\n    \n      return {\n        title: title,\n        dataIndex: title,\n        key: idx,\n        render(value, record) {\n          //console.log(value, record)\n          return {\n            props: {\n              style: { background: parseInt(value) > 0 ?  \"#C7E78F\": \"#F5A283\" }\n            },\n            children: <div>{value}</div>\n          };\n        }\n      \n      };\n    })\n    res.unshift(  {\n      title: 'Название',\n      dataIndex: 'name',\n      key: 'name',\n    })\n    return res\n  }\n\n  export const columns = createColumns(sizes)\n","import axios from \"axios\"\nimport moment from 'moment';\nimport { dateFormat } from \"../data\";\n\n\n//const username =\"admin@sobolroman22\"\n//const password= \"67b2008de9f9\";\n\n//var basicAuth = \"Basic YWRtaW5Ac29ib2xyb21hbjIyOjY3YjIwMDhkZTlmOQ==\"\nvar tokAuth = \"Bearer f103af43fa14ff2524437274cf82999285bd881e\"\n\nconst folderLinks = {\n  girls:\"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/c9ac503e-1d16-11eb-0a80-050d002dcd9a\",\n  boys:\"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/00cfa023-1d16-11eb-0a80-050d002dade8\",\n  unisex:\"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/73475072-28e9-11eb-0a80-029000103030\"\n}\n\nexport const fetchStock = async (options) => {\n  const { folderName, inTransit } = options;\n  const stockMode = inTransit ? \"all\" : \"positiveOnly\";\n  const link = `https://online.moysklad.ru/api/remap/1.2/report/stock/all?groupBy=consignment&filter=stockMode=${stockMode}&filter=productFolder=${folderLinks[folderName]}&filter=inTransitOnly=${inTransit}`\n\n    const result = await axios.post(\n      'https://kapri-server.herokuapp.com',{link},\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    return result.data\n}\n\nexport const fetchSales = async (\n  momentFrom = \"2020-11-01 00:00:00\",\n  momentTo = moment(new Date()).format(dateFormat)\n \n) => {\n  const link = `https://online.moysklad.ru/api/remap/1.2/report/profit/byvariant?momentFrom=${momentFrom}&momentTo=${momentTo}`\n  const result = await axios.post(\n    'https://kapri-server.herokuapp.com',{link},\n    {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \n      },\n    }\n  );\n  return result.data\n};\n\n// https://online.moysklad.ru/api/remap/1.2/entity/product/0348ebe1-4064-11eb-0a80-016c003284d1","import React,{useEffect,useState} from 'react'\nimport {useParams} from 'react-router-dom'\nimport { Table} from 'antd';\nimport {boysGoods, girlsGoods, } from '../../data'\nimport { createDefaultDataSource } from '../../utils/utils'\nimport {columns,getSize} from '../../utils/utils'\nimport { fetchStock } from '../../core/api';\nimport { Checkbox } from 'antd';\nimport { Menu, Dropdown, Button } from 'antd';\n\n\nfunction createDefaultStock(sex){\n  const products = sex === \"girls\" ? girlsGoods : boysGoods\n  return products.map((product)=>{\n    return    {\n      name: product,\n      sizes: {\n        \"NB\":{ width: 0, depth: 0,inTransit:0 },\n        \"0-3\": { width: 0, depth: 0,inTransit:0 },\n        \"1-2\": { width: 0, depth: 0,inTransit:0  },\n        \"2-4\": { width: 0, depth: 0,inTransit:0  },\n        \"3-6\": { width: 0, depth: 0 ,inTransit:0 },\n        \"4-6\": { width: 0, depth: 0,inTransit:0  },\n\n        \"6-9\": { width: 0, depth: 0 ,inTransit:0 },\n        \"9-12\": { width: 0, depth: 0 ,inTransit:0 },\n        \"12-18\": { width: 0, depth: 0 ,inTransit:0 },\n        \"18-24\": { width: 0, depth: 0 ,inTransit:0 },\n        \"24-36\": { width: 0, depth: 0 ,inTransit:0 },\n        \"24-48\": { width: 0, depth: 0 ,inTransit:0 },\n        \"36-48\": { width: 0, depth: 0 ,inTransit:0 },\n      },\n    }\n  })\n}\n\nconst brands = [\n  \"all\",\n  \"bi baby\",\n  \"bimini\",\n  \"biorganic\",\n  \"Disney baby\",\n  \"DreamKid\",\n  \"Dunnes\",\n  \"H&M\",\n  \"Little Angel\",\n  \"George\",\n  \"little life\",\n  \"Marks & Spencer\",\n  \"Matalan\",\n  \"Next\",\n  \"Tasco\",\n  \"KEHA\",\n  \"Мамине чудо\"\n];\n\n\n\nexport const StockTable = ({fetchFunc}) => {\n  const [dataSource, setDataSource] =useState(null)\n  const [isLoading,setIsLoading] = useState(false)\n  const [inTransit, setInTransit] =  useState(false)\n  const [brand,setBrand] = useState(\"all\")\n  const {sex} = useParams()\n  \n  const menu = \n (\n  <Menu theme=\"dark\" selectedKeys={[brand]}>\n    {brands.map(brand=>{\n      return   (\n      <Menu.Item  onClick ={()=>{setBrand(brand)}} key={brand}>\n        {brand}   \n    </Menu.Item>)\n    })}\n  \n  </Menu>\n);\n\n  const updateDataSource = async () => {\n    const stockData = createDefaultStock(sex);\n    const newDataSource = createDefaultDataSource(sex);\n    setIsLoading(true);\n    const options = { folderName: sex, inTransit };\n    let products = await fetchStock(options);\n\n    if (brand !== \"all\") {\n      products = filterByBrand(products,brand)\n    }\n\n    products.forEach((good) => {\n      const size = getSize(good.name);\n      stockData.forEach((item) => {\n        if (good.folder.name === item.name) {\n          item.sizes[size].width += 1;\n          item.sizes[size].depth += inTransit ? good.inTransit : good.stock;\n        }\n      });\n    });\n    newDataSource.forEach((item) => {\n      const res = stockData.find((el) => item.name === el.name);\n      for (let size in res.sizes) {\n        item[size] = `${res.sizes[size].depth} (${res.sizes[size].width}) `;\n      }\n    });\n    setDataSource(newDataSource);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    updateDataSource(fetchFunc);\n  }, [sex, inTransit, brand]);\n\n  return (\n    <>\n      <Dropdown  overlay={menu} placement=\"bottomCenter\">\n        <Button>Бренд</Button>\n      </Dropdown>\n      <Checkbox style={{\"marginLeft\":\"30px\"}}onChange={() => setInTransit((prev) => !prev)}>\n        In transit\n      </Checkbox>\n      <Table\n        dataSource={dataSource}\n        columns={columns}\n        columnstock=\"3px\"\n        pagination={false}\n        bordered={true}\n        loading={isLoading}\n      />\n    </>\n  );\n}\n\nconst filterByBrand = (products, brand) => {\n return products.filter((product) => {\n    return product.name.indexOf(brand) !== -1;\n  });\n}\n\n","import { Table } from 'antd'\nimport React,{useEffect,  useState} from 'react'\nimport { fetchSales } from '../../core/api'\nimport {productNamesToFolders,dateFormat} from '../../data'\nimport { createDefaultDataSource,columns,getSize } from '../../utils/utils'\nimport { DatePicker, Space } from 'antd';\nimport moment from 'moment';\nimport { useParams } from 'react-router-dom'\n\nconst mapSexToSymbol = {\n  boys: \"М\",\n  girls: \"Д\",\n  unisex: \"У\",\n};\nconst productNames = Object.keys(productNamesToFolders);\n\nconst { RangePicker } = DatePicker;\n\nexport const SalesTable = () => {\n    const {sex} = useParams()\n    const [dataSource, setDataSource] = useState(null)\n    const [isLoading, setIsLoading] = useState(false)\n    \n   const updateDataSource = async (momentFrom, momentTo) => {\n     setIsLoading(true);\n     const products = await fetchSales(momentFrom, momentTo);\n     const filteredBySex = filterBySex(products, sex);\n     setDataSource(updateSalesData(productNames, filteredBySex,sex));\n     setIsLoading(false);\n   };\n    useEffect(() => {\n      updateDataSource();\n    }, [sex]);\n    return (\n      <>\n        <Space direction=\"vertical\" size={12} align=\"center\">\n          <RangePicker\n            onChange={(moments) => {\n                updateDataSource(\n                moment(moments[0]._d).format(dateFormat),\n                moment(moments[1]._d).format(dateFormat)\n              );\n            }}\n            format={dateFormat}\n            size=\"large\"\n          />\n        </Space>\n        <Table\n          dataSource={dataSource}\n          columns={columns}\n          columnstock=\"3px\"\n          pagination={false}\n          bordered={true}\n          loading={isLoading}\n        />\n      </>\n    );;\n}\n\nfunction checkSex(str,sex){\n    const re = `^[${mapSexToSymbol[sex]}]{1}`;\n    const res = str.match(re);\n    if( res) {\n        return mapSexToSymbol[sex] === res[0];\n    }\n}\n\nfunction filterBySex(products, sex){\n    return products.filter((product) => {\n        return checkSex(product.assortment.name, sex);\n    })\n}\n\nfunction filterByProductName(products,name){\n    return products.filter(\n      (product) => product.assortment.name.indexOf(name) !== -1\n    );\n}\n\nfunction findFolderByProductName(dataSource,name){\n    return  dataSource.find((productFolder) => {\n        return productFolder.name === productNamesToFolders[name];\n      });\n}\nfunction updateSalesData(productNames,products,sex){\n  const dataSource = createDefaultDataSource(sex, 0);\n\n  productNames.forEach((name) => {\n    filterByProductName(products, name).forEach((product) => {\n      const productFolder = findFolderByProductName(dataSource, name);\n      const size = getSize(product.assortment.name);\n      productFolder[size] += product.sellQuantity;\n    });\n  });\n  return dataSource;\n}\n","import {StockTable} from './components/SalesTable/StockTable'\nimport React from 'react'\nimport {Route,NavLink} from 'react-router-dom'\n\n\n\nimport { Menu } from 'antd';\nimport { SalesTable } from './components/SalesTable/SalesTable';\n\nconst { SubMenu } = Menu;\n\nclass App extends React.Component {\n  state = {\n    current: 'mail',\n  };\n\n  handleClick = e => {\n    this.setState({ current: e.key });\n  };\n\n  render() {\n    const { current } = this.state;\n    return (\n      <>\n        \n          <Menu\n            onClick={this.handleClick}\n            selectedKeys={[current]}\n            mode=\"horizontal\"\n            theme=\"dark\"\n          >\n            <SubMenu key=\"boys\" title=\"Мальчики\">\n              <Menu.Item key=\"boysStock\">\n                <NavLink to=\"/stock/boys\">Oстатки </NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"boysSales\">\n                <NavLink to=\"/sales/boys\">Продажи </NavLink>\n              </Menu.Item>\n            </SubMenu>\n\n            <SubMenu key=\"girls\" title=\"Девочки\">\n              <Menu.Item key=\"girlsStock\">\n                <NavLink to=\"/stock/girls\">Oстатки </NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"girlsSales\">\n                <NavLink to=\"/sales/girls\">Продажи </NavLink>\n              </Menu.Item>\n            </SubMenu>\n            <SubMenu key=\"unisex\" title=\"Унисекс\">\n              <Menu.Item key=\"unisexStock\">\n                <NavLink to=\"/stock/unisex\">Oстатки</NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"unisexSales\">\n                <NavLink to=\"/sales/unisex\">Продажи</NavLink>\n              </Menu.Item>\n            </SubMenu>\n          </Menu>\n        \n        <Route exact path=\"/stock/:sex\" render={() => <StockTable />} />\n        <Route path=\"/sales/:sex\" render={() => <SalesTable />} />\n      </>\n    );\n  }\n}\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {HashRouter} from 'react-router-dom'\n\nReactDOM.render(\n    <HashRouter>\n      <App />\n   </HashRouter>,\n  document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}