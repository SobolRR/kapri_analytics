(this.webpackJsonpkapri_analytics=this.webpackJsonpkapri_analytics||[]).push([[0],{154:function(t,e,n){},247:function(t,e,n){"use strict";n.r(e);var r=n(14),a=n(0),i=n.n(a),c=n(28),s=n.n(c),o=(n(154),n(131)),u=n(132),l=n(147),d=n(144),h=n(39),p=n.n(h),f=n(56),j=n(55),b=n(22),m=n(249),O="YYYY-MM-DD HH:mm:ss",x=["\u0410\u043a\u0441\u0435\u0441\u0441\u0443\u0430\u0440\u044b","\u0411\u043e\u0434\u0438 (\u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0440\u0443\u043a\u0430\u0432)","\u0411\u043e\u0434\u0438 (\u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u0440\u0443\u043a\u0430\u0432)","\u041a\u043e\u0444\u0442\u044b","\u041d\u0430\u0431\u043e\u0440\u044b","\u041f\u0435\u0441\u043e\u0447\u043d\u0438\u043a","\u041f\u0438\u0436\u0430\u043c\u044b","\u041f\u043b\u0430\u0442\u044c\u044f","\u0420\u0435\u0433\u043b\u0430\u043d\u044b","\u0424\u0443\u0442\u0431\u043e\u043b\u043a\u0438","\u0427\u0435\u043b\u043e\u0432\u0435\u0447\u043a\u0438","\u0428\u043e\u0440\u0442\u044b","\u0428\u0442\u0430\u043d\u044b"],k=["\u0410\u043a\u0441\u0435\u0441\u0441\u0443\u0430\u0440\u044b","\u0411\u043e\u0434\u0438 (\u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0440\u0443\u043a\u0430\u0432)","\u0411\u043e\u0434\u0438 (\u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u0440\u0443\u043a\u0430\u0432)","\u041a\u043e\u0444\u0442\u044b","\u041d\u0430\u0431\u043e\u0440\u044b","\u041f\u0435\u0441\u043e\u0447\u043d\u0438\u043a","\u041f\u0438\u0436\u0430\u043c\u044b","\u0420\u0435\u0433\u043b\u0430\u043d\u044b","\u0424\u0443\u0442\u0431\u043e\u043b\u043a\u0438","\u0427\u0435\u043b\u043e\u0432\u0435\u0447\u043a\u0438","\u0428\u043e\u0440\u0442\u044b","\u0428\u0442\u0430\u043d\u044b"],y={"\u0414\u0420":"\u0411\u043e\u0434\u0438 (\u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0440\u0443\u043a\u0430\u0432)","\u041a\u0420":"\u0411\u043e\u0434\u0438 (\u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u0440\u0443\u043a\u0430\u0432)","\u041a\u043e\u0444\u0442":"\u041a\u043e\u0444\u0442\u044b","\u041d\u0430\u0431\u043e\u0440":"\u041d\u0430\u0431\u043e\u0440\u044b","\u041f\u0435\u0441\u043e\u0447\u043d\u0438\u043a":"\u041f\u0435\u0441\u043e\u0447\u043d\u0438\u043a","\u041f\u0438\u0436\u0430\u043c":"\u041f\u0438\u0436\u0430\u043c\u044b","\u041f\u043b\u0430\u0442\u044c":"\u041f\u043b\u0430\u0442\u044c\u044f","\u0420\u0435\u0433\u043b\u0430\u043d":"\u0420\u0435\u0433\u043b\u0430\u043d\u044b","\u0424\u0443\u0442\u0431\u043e\u043b\u043a":"\u0424\u0443\u0442\u0431\u043e\u043b\u043a\u0438","\u0427\u0435\u043b\u043e\u0432\u0435\u0447":"\u0427\u0435\u043b\u043e\u0432\u0435\u0447\u043a\u0438","\u0428\u043e\u0440\u0442\u044b":"\u0428\u043e\u0440\u0442\u044b","\u0428\u0442\u0430\u043d\u044b":"\u0428\u0442\u0430\u043d\u044b","\u041b\u043e\u0441\u0438\u043d\u044b":"\u0428\u0442\u0430\u043d\u044b","\u041a\u043e\u0441\u0442\u044e\u043c":"\u041d\u0430\u0431\u043e\u0440\u044b"};function v(t){return t.match(/([0-9]+)-([0-9]+)|NB/g)[0]}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="girls"===t?x:k;return n.map((function(t,n){return{key:n,name:t,NB:e,"0-3":e,"1-2":e,"2-4":e,"3-6":e,"4-6":e,"6-9":e,"9-12":e,"12-18":e,"18-24":e,"24-36":e,"24-48":e,"36-48":e}}))}var w=function(t){var e=t.map((function(t,e){return{title:t,dataIndex:t,key:e,render:function(t,e){return{props:{style:{background:parseInt(t)>0?"#C7E78F":"#F5A283"}},children:Object(r.jsx)("div",{children:t})}}}}));return e.unshift({title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name"}),e}(["NB","0-3","1-2","2-4","3-6","4-6","6-9","9-12","12-18","18-24","24-36","24-48","36-48"]),T=n(107),S=n.n(T),I=n(29),C=n.n(I),E={girls:"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/c9ac503e-1d16-11eb-0a80-050d002dcd9a",boys:"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/00cfa023-1d16-11eb-0a80-050d002dade8",unisex:"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/73475072-28e9-11eb-0a80-029000103030"},z=function(){var t=Object(f.a)(p.a.mark((function t(e){var n,r,a,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.folderName,r=e.inTransit,a="https://online.moysklad.ru/api/remap/1.2/report/stock/all?groupBy=consignment&filter=stockMode=".concat(r?"all":"positiveOnly","&filter=productFolder=").concat(E[n],"&filter=inTransitOnly=").concat(r),t.next=5,S.a.post("https://kapri-server.herokuapp.com",{link:a},{headers:{"Content-Type":"application/json"}});case 5:return i=t.sent,t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=Object(f.a)(p.a.mark((function t(){var e,n,r,a,i=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"2020-11-01 00:00:00",n=i.length>1&&void 0!==i[1]?i[1]:C()(new Date).format(O),r="https://online.moysklad.ru/api/remap/1.2/report/profit/byvariant?momentFrom=".concat(e,"&momentTo=").concat(n),t.next=5,S.a.post("https://kapri-server.herokuapp.com",{link:r},{headers:{"Content-Type":"application/json"}});case 5:return a=t.sent,t.abrupt("return",a.data);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=n(77),N=n(59),B=n(94),D=n(48);function A(t){return("girls"===t?x:k).map((function(t){return{name:t,sizes:{NB:{width:0,depth:0,inTransit:0},"0-3":{width:0,depth:0,inTransit:0},"1-2":{width:0,depth:0,inTransit:0},"2-4":{width:0,depth:0,inTransit:0},"3-6":{width:0,depth:0,inTransit:0},"4-6":{width:0,depth:0,inTransit:0},"6-9":{width:0,depth:0,inTransit:0},"9-12":{width:0,depth:0,inTransit:0},"12-18":{width:0,depth:0,inTransit:0},"18-24":{width:0,depth:0,inTransit:0},"24-36":{width:0,depth:0,inTransit:0},"24-48":{width:0,depth:0,inTransit:0},"36-48":{width:0,depth:0,inTransit:0}}}}))}var H=["all","bi baby","bimini","biorganic","Disney baby","DreamKid","Dunnes","H&M","Little Angel","George","little life","Marks & Spencer","Matalan","Next","Tasco","KEHA","\u041c\u0430\u043c\u0438\u043d\u0435 \u0447\u0443\u0434\u043e"],K=function(t){var e=t.fetchFunc,n=Object(a.useState)(null),i=Object(j.a)(n,2),c=i[0],s=i[1],o=Object(a.useState)(!1),u=Object(j.a)(o,2),l=u[0],d=u[1],h=Object(a.useState)(!1),O=Object(j.a)(h,2),x=O[0],k=O[1],y=Object(a.useState)("all"),T=Object(j.a)(y,2),S=T[0],I=T[1],C=Object(b.e)().sex,E=Object(r.jsx)(N.a,{theme:"dark",selectedKeys:[S],children:H.map((function(t){return Object(r.jsx)(N.a.Item,{onClick:function(){I(t)},children:t},t)}))}),F=function(){var t=Object(f.a)(p.a.mark((function t(){var e,n,r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=A(C),n=g(C),d(!0),r={folderName:C,inTransit:x},t.next=6,z(r);case 6:a=t.sent,"all"!==S&&(a=Y(a,S)),a.forEach((function(t){var n=v(t.name);e.forEach((function(e){t.folder.name===e.name&&(e.sizes[n].width+=1,e.sizes[n].depth+=x?t.inTransit:t.stock)}))})),n.forEach((function(t){var n=e.find((function(e){return t.name===e.name}));for(var r in n.sizes)t[r]="".concat(n.sizes[r].depth," (").concat(n.sizes[r].width,") ")})),s(n),d(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){F(e)}),[C,x,S]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(B.a,{overlay:E,placement:"bottomCenter",children:Object(r.jsx)(D.a,{children:"\u0411\u0440\u0435\u043d\u0434"})}),Object(r.jsx)(M.a,{style:{marginLeft:"30px"},onChange:function(){return k((function(t){return!t}))},children:"In transit"}),Object(r.jsx)(m.a,{dataSource:c,columns:w,columnstock:"3px",pagination:!1,bordered:!0,loading:l})]})},Y=function(t,e){return t.filter((function(t){return-1!==t.name.indexOf(e)}))},_=n(38),J=n(250),L=n(251),G={boys:"\u041c",girls:"\u0414",unisex:"\u0423"},P=Object.keys(y),Q=J.a.RangePicker,R=function(){var t=Object(b.e)().sex,e=Object(a.useState)(null),n=Object(j.a)(e,2),i=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(j.a)(s,2),u=o[0],l=o[1],d=function(){var e=Object(f.a)(p.a.mark((function e(n,r){var a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,F(n,r);case 3:a=e.sent,i=q(a,t),c(U(P,i,t)),l(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){d()}),[t]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(L.b,{direction:"vertical",size:12,align:"center",children:Object(r.jsx)(Q,{onChange:function(t){d(C()(t[0]._d).format(O),C()(t[1]._d).format(O))},format:O,size:"large"})}),Object(r.jsx)(m.a,{dataSource:i,columns:w,columnstock:"3px",pagination:!1,bordered:!0,loading:u})]})};function q(t,e){return t.filter((function(t){return function(t,e){var n="^[".concat(G[e],"]{1}"),r=t.match(n);if(r)return G[e]===r[0]}(t.assortment.name,e)}))}function U(t,e,n){var r=g(n,0);return t.forEach((function(t){(function(t,e){return t.filter((function(t){return-1!==t.assortment.name.indexOf(e)}))})(e,t).forEach((function(e){(function(t,e){return t.find((function(t){return t.name===y[e]}))}(r,t))[v(e.assortment.name)]+=e.sellQuantity}))})),r}var V=N.a.SubMenu,W=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={current:"mail"},t.handleClick=function(e){t.setState({current:e.key})},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state.current;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(N.a,{onClick:this.handleClick,selectedKeys:[t],mode:"horizontal",theme:"dark",children:[Object(r.jsxs)(V,{title:"\u041c\u0430\u043b\u044c\u0447\u0438\u043a\u0438",children:[Object(r.jsx)(N.a.Item,{children:Object(r.jsx)(_.b,{to:"/stock/boys",children:"O\u0441\u0442\u0430\u0442\u043a\u0438 "})},"boysStock"),Object(r.jsx)(N.a.Item,{children:Object(r.jsx)(_.b,{to:"/sales/boys",children:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 "})},"boysSales")]},"boys"),Object(r.jsxs)(V,{title:"\u0414\u0435\u0432\u043e\u0447\u043a\u0438",children:[Object(r.jsx)(N.a.Item,{children:Object(r.jsx)(_.b,{to:"/stock/girls",children:"O\u0441\u0442\u0430\u0442\u043a\u0438 "})},"girlsStock"),Object(r.jsx)(N.a.Item,{children:Object(r.jsx)(_.b,{to:"/sales/girls",children:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 "})},"girlsSales")]},"girls"),Object(r.jsxs)(V,{title:"\u0423\u043d\u0438\u0441\u0435\u043a\u0441",children:[Object(r.jsx)(N.a.Item,{children:Object(r.jsx)(_.b,{to:"/stock/unisex",children:"O\u0441\u0442\u0430\u0442\u043a\u0438"})},"unisexStock"),Object(r.jsx)(N.a.Item,{children:Object(r.jsx)(_.b,{to:"/sales/unisex",children:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438"})},"unisexSales")]},"unisex")]}),Object(r.jsx)(b.a,{exact:!0,path:"/stock/:sex",render:function(){return Object(r.jsx)(K,{})}}),Object(r.jsx)(b.a,{path:"/sales/:sex",render:function(){return Object(r.jsx)(R,{})}})]})}}]),n}(i.a.Component);s.a.render(Object(r.jsx)(_.a,{children:Object(r.jsx)(W,{})}),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.ba25c5ab.chunk.js.map