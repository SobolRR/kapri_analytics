{"version":3,"sources":["data.js","utils/utils.js","core/api.js","components/SalesTable/StockTable.js","components/SalesTable/SalesTable.js","App.js","index.js"],"names":["dateFormat","goods","productNamesToFolders","getSize","name","match","createDefaultDataSource","inisialValue","map","good","idx","key","NB","columns","titles","res","title","dataIndex","render","value","record","props","style","background","parseInt","children","unshift","createColumns","tokAuth","folderLinks","girls","boys","unisex","fetchStock","options","a","folderName","inTransit","stockMode","axios","get","headers","Authorization","result","data","rows","fetchSales","momentFrom","momentTo","moment","Date","format","createDefaultStock","products","product","sizes","width","depth","brands","StockTable","fetchFunc","useState","dataSource","setDataSource","isLoading","setIsLoading","setInTransit","brand","setBrand","sex","useParams","menu","theme","selectedKeys","Item","onClick","updateDataSource","stockData","newDataSource","filter","indexOf","forEach","size","item","folder","stock","find","el","useEffect","overlay","placement","onChange","prev","columnstock","pagination","bordered","loading","mapSexToSymbol","productNames","Object","keys","RangePicker","DatePicker","SalesTable","filteredBySex","filterBySex","updateSalesData","direction","align","moments","_d","str","re","checkSex","assortment","filterByProductName","productFolder","findFolderByProductName","sellQuantity","SubMenu","Menu","App","state","current","handleClick","e","setState","this","path","mode","to","exact","React","Component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b752cf01.chunk.js","sourcesContent":["export const dateFormat = 'YYYY-MM-DD HH:mm:ss';\n\n\nexport const goods = [\n    \"Аксессуары\",\n    \"Боди (длинный рукав)\",\n    \"Боди (короткий рукав)\",\n    \"Кофты\",\n    \"Наборы\",\n    \"Песочник\",\n    \"Пижамы\",\n    \"Платья\",\n    \"Регланы\",\n    \"Футболки\",\n    \"Человечки\",\n    \"Шорты\",\n    \"Штаны\"]\n\n\nexport const productNamesToFolders = {\n    \"ДР\":\"Боди (длинный рукав)\",\n    \"КР\":\"Боди (короткий рукав)\",\n    \"Кофт\":\"Кофты\",\n    \"Набор\":\"Наборы\",\n    \"Песочник\":\"Песочник\",\n    \"Пижам\":\"Пижамы\",\n    \"Плать\":\"Платья\",\n    \"Реглан\":\"Регланы\",\n    \"Футболк\":\"Футболки\",\n    \"Человеч\":\"Человечки\",\n    \"Шорты\":\"Шорты\",\n    \"Штаны\": \"Штаны\",\n    \"Лосины\":\"Штаны\",\n    \"Костюм\":\"Наборы\"\n}\nexport const sizes = [\n\"NB\",\n\"0-3\",\n\"1-2\",\n\"2-4\",\n\"3-6\",\n\"4-6\",\n\"6-9\",\n\"9-12\",\n\"12-18\",\n\"18-24\",\n\"24-36\",\n\"24-48\",\n\"36-48\"]\n\n","import { sizes } from \"../data\"\n\nexport function getSize(name){\n  const re = /([0-9]+)-([0-9]+)|NB/g;\n  return name.match(re)[0];\n}\n\nexport function createDefaultDataSource(goods,inisialValue=\"\"){\n  return goods.map((good,idx)=>{\n    return {\n      key: idx,\n      name:good,\n      NB: inisialValue,\n      \"0-3\": inisialValue,\n      \"1-2\":inisialValue,\n      \"2-4\":inisialValue,\n      \"3-6\": inisialValue,\n      \"4-6\": inisialValue,\n      \"6-9\": inisialValue,\n      \"9-12\": inisialValue,\n      \"12-18\": inisialValue,\n      \"18-24\": inisialValue,\n      \"24-36\":inisialValue,\n      \"24-48\":inisialValue,\n      \"36-48\":inisialValue\n    }\n  })\n}\n\nexport function createColumns(titles){\n    const res = titles.map((title,idx)=>{\n      return {\n        title: title,\n        dataIndex: title,\n        key: idx,\n        render(value, record) {\n          //console.log(value, record)\n          return {\n            props: {\n              style: { background: parseInt(value) > 0 ?  \"#C7E78F\": \"#F5A283\" }\n            },\n            children: <div>{value}</div>\n          };\n        }\n      \n      };\n    })\n    res.unshift(  {\n      title: 'Название',\n      dataIndex: 'name',\n      key: 'name',\n    })\n    return res\n  }\n\n  export const columns = createColumns(sizes)\n","import axios from \"axios\"\nimport moment from 'moment';\nimport { dateFormat } from \"../data\";\n\n\n//const username =\"admin@sobolroman22\"\n//const password= \"67b2008de9f9\";\n\n//var basicAuth = \"Basic YWRtaW5Ac29ib2xyb21hbjIyOjY3YjIwMDhkZTlmOQ==\"\nvar tokAuth = \"Bearer f103af43fa14ff2524437274cf82999285bd881e\"\n\nconst folderLinks = {\n  girls:\"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/c9ac503e-1d16-11eb-0a80-050d002dcd9a\",\n  boys:\"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/00cfa023-1d16-11eb-0a80-050d002dade8\",\n  unisex:\"https://online.moysklad.ru/api/remap/1.2/entity/productfolder/73475072-28e9-11eb-0a80-029000103030\"\n}\n\nexport const fetchStock = async (options) => {\n  const { folderName, inTransit } = options;\n  const stockMode = inTransit ? \"all\" : \"positiveOnly\";\n  \n    const result = await axios.get(\n      `https://online.moysklad.ru/api/remap/1.2/report/stock/all?groupBy=consignment&filter=stockMode=${stockMode}&filter=productFolder=${folderLinks[folderName]}&filter=inTransitOnly=${inTransit}`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: tokAuth,\n        },\n      }\n    );\n    return result.data.rows\n}\n\nexport const fetchSales = async (\n  momentFrom = \"2021-01-01 00:00:00\",\n  momentTo = moment(new Date()).format(dateFormat)\n) => {\n  const result = await axios.get(\n    `https://online.moysklad.ru/api/remap/1.2/report/profit/byvariant?momentFrom=${momentFrom}&momentTo=${momentTo}`,\n    {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: tokAuth,\n      },\n    }\n  );\n  return result.data.rows;\n};\n\n// https://online.moysklad.ru/api/remap/1.2/entity/product/0348ebe1-4064-11eb-0a80-016c003284d1","import React,{useEffect,useState} from 'react'\nimport {useParams} from 'react-router-dom'\nimport { Table} from 'antd';\nimport {goods} from '../../data'\nimport { createDefaultDataSource } from '../../utils/utils'\nimport {columns,getSize} from '../../utils/utils'\nimport { fetchStock } from '../../core/api';\nimport { Checkbox } from 'antd';\nimport { Menu, Dropdown, Button } from 'antd';\n\n\nfunction createDefaultStock(products){\n  return products.map((product)=>{\n    return    {\n      name: product,\n      sizes: {\n        \"NB\":{ width: 0, depth: 0,inTransit:0 },\n        \"0-3\": { width: 0, depth: 0,inTransit:0 },\n        \"1-2\": { width: 0, depth: 0,inTransit:0  },\n        \"2-4\": { width: 0, depth: 0,inTransit:0  },\n        \"3-6\": { width: 0, depth: 0 ,inTransit:0 },\n        \"4-6\": { width: 0, depth: 0,inTransit:0  },\n\n        \"6-9\": { width: 0, depth: 0 ,inTransit:0 },\n        \"9-12\": { width: 0, depth: 0 ,inTransit:0 },\n        \"12-18\": { width: 0, depth: 0 ,inTransit:0 },\n        \"18-24\": { width: 0, depth: 0 ,inTransit:0 },\n        \"24-36\": { width: 0, depth: 0 ,inTransit:0 },\n        \"24-48\": { width: 0, depth: 0 ,inTransit:0 },\n        \"36-48\": { width: 0, depth: 0 ,inTransit:0 },\n      },\n    }\n  })\n}\n\nconst brands = [\n  \"all\",\n  \"bi baby\",\n  \"bimini\",\n  \"biorganic\",\n  \"Disney baby\",\n  \"DreamKid\",\n  \"Dunnes\",\n  \"H&M\",\n  \"Little Angel\",\n  \"George\",\n  \"little life\",\n  \"Marks & Spencer\",\n  \"Matalan\",\n  \"Next\",\n  \"Tasco\",\n  \"KEHA\",\n  \"Мамине чудо\"\n];\n\n\n\nexport const StockTable = ({fetchFunc}) => {\n  const [dataSource, setDataSource] =useState(null)\n  const [isLoading,setIsLoading] = useState(false)\n  const [inTransit, setInTransit] =  useState(false)\n  const [brand,setBrand] = useState(\"all\")\n  const {sex} = useParams()\n  \n  const menu = \n (\n  <Menu theme=\"dark\" selectedKeys={[brand]}>\n    {brands.map(brand=>{\n      return   (\n      <Menu.Item  onClick ={()=>{setBrand(brand)}} key={brand}>\n        {brand}   \n    </Menu.Item>)\n    })}\n  \n  </Menu>\n);\n\n\n  const updateDataSource = async () => {\n    const stockData = createDefaultStock(goods);\n    const newDataSource = createDefaultDataSource(goods);\n    setIsLoading(true);\n    const options = { folderName: sex, inTransit };\n    let products = await fetchStock(options);\n\n    if (brand !== \"all\") {\n      products = products.filter((product) => {\n        return product.name.indexOf(brand) !== -1;\n      });\n    }\n\n    products.forEach((good) => {\n      const size = getSize(good.name);\n      stockData.forEach((item) => {\n        if (good.folder.name === item.name) {\n          item.sizes[size].width += 1;\n          item.sizes[size].depth += inTransit ? good.inTransit : good.stock;\n        }\n      });\n    });\n    newDataSource.forEach((item) => {\n      const res = stockData.find((el) => item.name === el.name);\n      for (let size in res.sizes) {\n        item[size] = `${res.sizes[size].depth} (${res.sizes[size].width}) `;\n      }\n    });\n    setDataSource(newDataSource);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    updateDataSource(fetchFunc);\n  }, [sex, inTransit, brand]);\n\n  return (\n    <>\n      <Dropdown  overlay={menu} placement=\"bottomCenter\">\n        <Button>Бренд</Button>\n      </Dropdown>\n      <Checkbox style={{\"marginLeft\":\"30px\"}}onChange={() => setInTransit((prev) => !prev)}>\n        In transit\n      </Checkbox>\n      <Table\n        dataSource={dataSource}\n        columns={columns}\n        columnstock=\"3px\"\n        pagination={false}\n        bordered={true}\n        loading={isLoading}\n      />\n    </>\n  );\n}\n\n\n","import { Table } from 'antd'\nimport React,{useEffect,  useState} from 'react'\nimport { fetchSales } from '../../core/api'\nimport {goods,productNamesToFolders,dateFormat} from '../../data'\nimport { createDefaultDataSource,columns,getSize } from '../../utils/utils'\nimport { DatePicker, Space } from 'antd';\nimport moment from 'moment';\nimport { useParams } from 'react-router-dom'\n\nconst mapSexToSymbol = {\n  boys: \"М\",\n  girls: \"Д\",\n  unisex: \"У\",\n};\nconst productNames = Object.keys(productNamesToFolders);\n\nconst { RangePicker } = DatePicker;\n\nexport const SalesTable = () => {\n    const {sex} = useParams()\n    const [dataSource, setDataSource] = useState(null)\n    const [isLoading, setIsLoading] = useState(false)\n    \n   const updateDataSource = async (momentFrom, momentTo) => {\n     setIsLoading(true);\n     const products = await fetchSales(momentFrom, momentTo);\n     const filteredBySex = filterBySex(products, sex);\n     setDataSource(updateSalesData(productNames, filteredBySex));\n     setIsLoading(false);\n   };\n    useEffect(() => {\n      updateDataSource();\n    }, [sex]);\n    return (\n      <>\n        <Space direction=\"vertical\" size={12} align=\"center\">\n          <RangePicker\n            onChange={(moments) => {\n                updateDataSource(\n                moment(moments[0]._d).format(dateFormat),\n                moment(moments[1]._d).format(dateFormat)\n              );\n            }}\n            format={dateFormat}\n            size=\"large\"\n          />\n        </Space>\n        <Table\n          dataSource={dataSource}\n          columns={columns}\n          columnstock=\"3px\"\n          pagination={false}\n          bordered={true}\n          loading={isLoading}\n        />\n      </>\n    );;\n}\n\nfunction checkSex(str,sex){\n    const re = `^[${mapSexToSymbol[sex]}]{1}`;\n    const res = str.match(re);\n    if( res) {\n        return mapSexToSymbol[sex] === res[0];\n    }\n}\n\nfunction filterBySex(products, sex){\n    return products.filter((product) => {\n        return checkSex(product.assortment.name, sex);\n    })\n}\n\nfunction filterByProductName(products,name){\n    return products.filter(\n      (product) => product.assortment.name.indexOf(name) !== -1\n    );\n}\n\nfunction findFolderByProductName(dataSource,name){\n    return  dataSource.find((productFolder) => {\n        return productFolder.name === productNamesToFolders[name];\n      });\n}\nfunction updateSalesData(productNames,products){\n  const dataSource = createDefaultDataSource(goods, 0);\n\n  productNames.forEach((name) => {\n    filterByProductName(products, name).forEach((product) => {\n      const productFolder = findFolderByProductName(dataSource, name);\n      const size = getSize(product.assortment.name);\n      productFolder[size] += product.sellQuantity;\n    });\n  });\n  return dataSource;\n}\n","import {StockTable} from './components/SalesTable/StockTable'\nimport React from 'react'\nimport {Route,NavLink} from 'react-router-dom'\n\n\n\nimport { Menu } from 'antd';\nimport { SalesTable } from './components/SalesTable/SalesTable';\n\nconst { SubMenu } = Menu;\n\nclass App extends React.Component {\n  state = {\n    current: 'mail',\n  };\n\n  handleClick = e => {\n    this.setState({ current: e.key });\n  };\n\n  render() {\n    const { current } = this.state;\n    return (\n      <>\n        <Route path=\"/\">\n          <Menu\n            onClick={this.handleClick}\n            selectedKeys={[current]}\n            mode=\"horizontal\"\n            theme=\"dark\"\n          >\n            <SubMenu key=\"boys\" title=\"Мальчики\">\n              <Menu.Item key=\"boysStock\">\n                <NavLink to=\"/stock/boys\">Oстатки </NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"boysSales\">\n                <NavLink to=\"/sales/boys\">Продажи </NavLink>\n              </Menu.Item>\n            </SubMenu>\n\n            <SubMenu key=\"girls\" title=\"Девочки\">\n              <Menu.Item key=\"girlsStock\">\n                <NavLink to=\"/stock/girls\">Oстатки </NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"girlsSales\">\n                <NavLink to=\"/sales/girls\">Продажи </NavLink>\n              </Menu.Item>\n            </SubMenu>\n            <SubMenu key=\"unisex\" title=\"Унисекс\">\n              <Menu.Item key=\"unisexStock\">\n                <NavLink to=\"/stock/unisex\">Oстатки</NavLink>\n              </Menu.Item>\n              <Menu.Item key=\"unisexSales\">\n                <NavLink to=\"/sales/unisex\">Продажи</NavLink>\n              </Menu.Item>\n            </SubMenu>\n          </Menu>\n        </Route>\n        <Route exact path=\"/stock/:sex\" render={() => <StockTable />} />\n        <Route path=\"/sales/:sex\" render={() => <SalesTable />} />\n      </>\n    );\n  }\n}\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter as Router} from 'react-router-dom'\n\nReactDOM.render(\n    <Router>\n      <App />\n   </Router>,\n  document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}